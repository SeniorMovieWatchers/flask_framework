d>
    
        <title>Netflix and Chill</title>
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script> 
        
        <!-- Required meta tags always come first -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
        
        <style type="text/css">
        
            #search-jumbotron {
                background-size: cover;
                background-color: #303030;
                color: white;
                text-align: center;
                margin: 0;  
            }
            
            #signup-jumbotron {
                display: none;
                background-size: cover;
                background-color: #303030;
                color: white;
                text-align: center;
                margin: 0; 
            }
            
            #update-jumbotron {
                display: none;
                background-size: cover;
                background-color: #303030;
                color: white;
                text-align: center;
                margin: 0; 
            }
            
            #header1 {
                margin-top: 45px;
            }
            
            #search {
                width: 300px;
            }
            
            #nav-target {
                height: 55px;
            }
            
            #signup-form {
                width: 500px;
                margin: 0 auto;
            }
            
            #search-users {
                margin: 15 0 0 10;
            }
            
            #results {
                width: 350px;
            }
            
            #edit-account{
                display: none;
            }
            
            #logout {
                display: none;
            }
        
        </style>
        
    </head>
    
    <body data-spy="scroll" data-target="#nav-target" data-offset="50">
    
        <nav id="nav-target" class="navbar navbar-fixed-top navbar-light bg-faded">
            
          <a class="navbar-brand" href="#">Netflix and Chill</a>
            
          <ul class="nav navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#signup-jumbotron">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#middle-jumbotron">About</a>
            </li>
          </ul>
            
          <form class="form-inline pull-xs-right">
            <input class="form-control" type="email" id="email-text" placeholder="Email">
            <input class="form-control" type="password" id="password-text" placeholder="Password">
            <button class="btn btn-success" type="submit" id="login-button">Login</button>
            <button class="btn btn-success" type="button" id="signup">Sign Up</button>
            <button class="btn btn-success" type="button" id="edit-account">Edit Account</button>
            <button class="btn btn-success" type="button" id="logout">Log Out</button>
          </form>
            
        </nav>
        
        <div id="search-jumbotron" class="jumbotron jumbotron-fluid">
            
          <h1 id="header1" class="display-3">Netflix and Chill</h1>
          <hr class="m-y-2">
            
          <form id="search-form" class="form-inline">
              
              <div class="form-group">
                <div class="input-group">
                  <input type="text" class="form-control" id="search" placeholder="Enter movie name">
                </div>
              </div>
              <button type="submit" class="btn btn-primary">Search</button>
              
          </form>
            
        </div>
        
        <div id="signup-jumbotron" class="jumbotron jumbotron-fluid">
            
          <h1 id="header1" class="display-3">Create Account</h1>
          <hr class="m-y-2">
            
          <form id="signup-form">
              
              <div class="form-group">
                <label for="name">Name</label>
                <input type="name" class="form-control" id="name" placeholder="Name">
              </div>
              <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" class="form-control" id="email" placeholder="Email">
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Password">
              </div>
              <div class="form-group">
                <label for="passwordConfirm">Confirm Password</label>
                <input type="password" class="form-control" id="passwordConfirm" placeholder="Confirm Password">
              </div>
              <button type="button" id="submit-signup" class="btn btn-default">Submit</button>
              
          </form>
            
        </div>
        
        <div id="update-jumbotron" class="jumbotron jumbotron-fluid">
            
          <h1 id="header1" class="display-3">Update Account</h1>
          <hr class="m-y-2">
            
          <form id="signup-form">
              
              <div class="form-group">
                <label for="name">New Name</label>
                <input type="name" class="form-control" id="name" placeholder="Name">
              </div>
              <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" class="form-control" id="test-email" placeholder="Email">
              </div>
              <button type="button" id="submit-update" class="btn btn-default">Submit</button>
              
          </form>
            
        </div>
        
        <div id="search-users">
        
            <div id="data-search">
            
                <h2>Search for users on the website</h2>
                <input type="text" id="user" placeholder="Name">
                <button type="button" id="search-user">Search Name</button>
                <input type="text" id="user-email" placeholder="Email">
                <button type="button" id="search-user-email">Search Email</button>
                <button type="button" id="duplicate-email">View Duplicate Emails</button>
            
            </div>
            
            <div id="results">
            
                <h5>Results:</h5>
                
                <table class="table table-inverse" id="results-table">
                
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody id="table-content">
                    </tbody>
                
                </table>
            
            </div>
            
            <h5>Executed Query:</h5>
            <p id="query-executed"></p>
            
        </div>
        
        <script type="text/javascript">
            
            function isEmail(email) {
                var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                return regex.test(email);
            }
        
            $("#signup").click(function(){
                $("#signup-jumbotron").css("display", "block");
            });
            
            $("#edit-account").click(function() {
                $("#update-jumbotron").css("display", "block");
            });
            
            $("#logout").click(function() {
                $("#login-button").css("display", "block");
                $("#signup").css("display", "block");
                $("#email-text").css("display", "block");
                $("#password-text").css("display", "block");
                $("#logout").css("display", "none");
                $("#edit-account").css("display", "none");
            });
            
            $("#search-user").click(function() {
                var new_data = {
                        username : $("#user").val()
                    };
                    
                    $.ajax({
                        url: 'http://fa16-cs411-50.cs.illinois.edu/home/search-user-username',
                        dataType: 'JSON',
                        type: 'POST',
                        contentType: 'application/json; charset=utf-8',
                        success: function(result){
                            $("#table-content").html('');
                            $("#query-executed").html(result['query']);
                            user_list = result['user_list'];
                            var index;
                            for (index = 0; index < user_list.length; index++) {
                                var user = user_list[index];
                                var result = "<tr>";
                                result += "<td>" + user['id'] + "</td>";
                                result += "<td>" + user['username'] + "</td>"
                                result += "<td>" + user['email'] +"</td>";
                                $( "#table-content" ).append(result);
                            }
                        },
                        data: JSON.stringify(new_data)
                    });
            });
            
            $("#search-user-email").click(function() {
                var new_data = {
                        email : $("#user-email").val()
                    };
                    
                    $.ajax({
                        url: 'http://fa16-cs411-50.cs.illinois.edu/home/search-user-email',
                        dataType: 'JSON',
                        type: 'POST',
                        contentType: 'application/json; charset=utf-8',
                        success: function(result){
                            $("#table-content").html('');
                            $("#query-executed").html(result['query']);
                            user_list = result['user_list'];
                            var index;
                            for (index = 0; index < user_list.length; index++) {
                                var user = user_list[index];
                                var result = "<tr>";
                                result += "<td>" + user['id'] + "</td>";
                                result += "<td>" + user['username'] + "</td>"
                                result += "<td>" + user['email'] +"</td>";
                                $("#table-content").append(result);
                            }
                        },
                        data: JSON.stringify(new_data)
                    });
            });
            
            $("#duplicate-email").click(function() {
                $.ajax({
                    url: 'http://fa16-cs411-50.cs.illinois.edu/home/duplicate-email',
                    dataType: 'JSON',
                    type: 'GET',
                    contentType: 'application/json; charset=utf-8',
                    success: function(result){
                        $("#table-content").html('');
                        $("#query-executed").html(result['query']);
                        user_list = result['user_list'];
                        var index;
                        for (index = 0; index < user_list.length; index++) {
                            var user = user_list[index];
                            var result = "<tr>";
                            result += "<td>" + user['id'] + "</td>";
                            result += "<td>" + user['username'] + "</td>"
                            result += "<td>" + user['email'] +"</td>";
                            $("#table-content").append(result);
                        }
                    }
                });
            });
            
            
                $("#submit-signup").click(function() {
                var new_data = {
                        username : $("#name").val(),
                        email : $("#email").val(),
                        password : $("#password").val()
                    };
                    
                    $.ajax({
                        url: 'http://fa16-cs411-50.cs.illinois.edu/home/new-user',
                        dataType: 'JSON',
                        type: 'POST',
                        contentType: 'application/json; charset=utf-8',
                        success: function(result){
                            $("#query-executed").html(result['query']);
                        },
                        data: JSON.stringify(new_data)
                    });
            });
            
            $("#submit-update").click(function(){
                
                var errorMessage = "";
                var fieldMissing = "";
                
                if($("#email").val() == ""){
                    
                    fieldMissing += "Email\n"
                    
                }
                
                if($("#name").val() == ""){
                    
                    fieldMissing += "Name\n"
                    
                }
                
                if(fieldMissing != ""){
                    
                    errorMessage += "The following field(s) are missing:" + fieldMissing;
                    
                }
               
                if(isEmail($("#email").val()) == false){
                    
                    errorMessage += "Email is invalid\n";
                    
                }
                
                if(errorMessage != ""){
                    
                    alert(errorMessage);
                    
                }else{
                    
                    /*var new_data = {
                        name : $("#name").val(),
                        email : $("#email").val(),
                        password : $("#password").val();
                    };
                    
                    $.ajax({
                        url: '/new-update',
                        dataType: 'JSON',
                        type: 'POST',
                        contentType: 'application/json; charset=utf-8',
                        success: function(result){
                            console.log(result)
                        },
                        data: JSON.stringify(new_data);
                    });*/
                    
                    $("#update-jumbotron").css("display", "none");
                    $("#login-button").css("display", "none");
                    $("#signup").css("display", "none");
                    $("#email-text").css("display", "none");
                    $("#password-text").css("display", "none");
                    $("#edit-account").css("display", "block");
                    $("#logout").css("display", "block");
                    
                } 
                
            });
            
            $("#submit-signup").click(function(){
                
                var errorMessage = "";
                var fieldMissing = "";
                
                if($("#email").val() == ""){
                    
                    fieldMissing += "Email\n"
                    
                }
                
                if($("#name").val() == ""){
                    
                    fieldMissing += "Name\n"
                    
                }
                
                if($("#password").val() == ""){
                    
                    fieldMissing += "Password\n"
                    
                }
                
                if($("#passwordConfirm").val() == ""){
                    
                    fieldMissing += "Confirm Password\n"
                    
                }
                
                if(fieldMissing != ""){
                    
                    errorMessage += "The following field(s) are missing:" + fieldMissing;
                    
                }
               
                if(isEmail($("#email").val()) == false){
                    
                    errorMessage += "Email is invalid\n";
                    
                }
                
                if($("#password").val() != $("#passwordConfirm").val()){
                    
                    errorMessage += "Passwords don't match";
                    
                }
                
                if(errorMessage != ""){
                    
                    alert(errorMessage);
                    
                }else{
                    
                    /*var new_data = {
                        name : $("#name").val(),
                        email : $("#email").val(),
                        password : $("#password").val();
                    };
                    
                    $.ajax({
                        url: '/new-user',
                        dataType: 'JSON',
                        type: 'POST',
                        contentType: 'application/json; charset=utf-8',
                        success: function(result){
                            console.log(result)
                        },
                        data: JSON.stringify(new_data);
                    });*/
                    
                    $("#signup-jumbotron").css("display", "none");
                    $("#login-button").css("display", "none");
                    $("#signup").css("display", "none");
                    $("#email-text").css("display", "none");
                    $("#password-text").css("display", "none");
                    $("#edit-account").css("display", "block");
                    $("#logout").css("display", "block");
                    
                } 
                
            });
        
        </script>
    
    </body>
    
</html>
